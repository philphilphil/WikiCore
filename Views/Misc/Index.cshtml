@model WikiCore.Models.MiscModel

@{
  ViewData["Title"] = "Miscellaneous";
  
  if (ViewData["ErrorMessage"] != null) {
    <div class="ui negative message">
    <i class="close icon"></i>
    <div class="header">
    Error
     </div>
    <p>@ViewData["ErrorMessage"]
    </p></div>
  }
}

<h2>Categories</h2>
<h4>Add</h4>
<form method="post" asp-action="AddCategory" asp-controller="Misc"> 
  <div class="ui labeled input">
  <div class="ui label">
    Name
  </div>
  <input type="text" id="Title" placeholder=".." asp-for="CategoryName">
  &nbsp;
    <div class="ui labeled input">
  <div class="ui label">
    Parent
  </div>
  <select asp-for="CategoryId"  asp-items="@Model.Categories" class="ui dropdown"></select>
</div>
</div>
 <button type="submit" class="ui primary button">Add</button>
</form>
<h4>Remove</h4>
<form method="post" asp-action="DeleteCategory" asp-controller="Misc"> 
  <div class="ui labeled input">
  <div class="ui label">
    Category
  </div>
  <select asp-for="CategoryNewId"  asp-items="@Model.Categories" class="ui dropdown"></select>
</div>
  <div class="ui labeled input">
  <div class="ui label">
    Move Pages to
  </div>
  <select asp-for="CategoryId"  asp-items="@Model.Categories" class="ui dropdown"></select>
</div>
 <button type="submit" class="ui primary button">Remove</button>
</form>

<h4>Tree:</h4>
 @foreach (Tuple<int, string, int> c in Model.CategoryTree) {   
       @Html.Raw(new String('-', c.Item1) + " " + c.Item2)<br />
 }
<h3>All pages:</h3>
 @foreach (var page in Model.Pages) {
     <p>      
        @Html.ActionLink(page.Title, "Index", "Home", new { id = page.Id })
     </p>
 }